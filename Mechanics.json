{"entries":{"0":{"uid":0,"key":[],"keysecondary":[],"comment":"NPC RELATIONSHIP ENGINE","content":"// ||                  NPC RELATIONSHIP ENGINE (SIMPLIFIED)                   ||\n// =============================================================================\n\n// --- 1. STATE ---\nnpc = {\n  stats: { Bond, Fear, Hostility }, // 1-5 (Start 3)\n  counters: {\n    meaningful_scenes: 0\n  }\n}\n\n// --- 2. PRE-EXISTING RELATIONSHIP --- (First interaction ONLY)\n// If {{user}} and NPC have established history BEFORE the current scene:\n//\n// OVERRIDE BASELINE (replaces 3/3/3):\n// - Established friends/allies â†’ Bond 4-5\n// - Casual acquaintances â†’ Bond 3-4\n// - Rivals/tense history â†’ Hostility 4\n// - Known enemy â†’ Hostility 5\n//\n// SKIP: APPEARANCE, REPUTATION (personal knowledge supersedes first impressions)\n// APPLY: CONTEXT (location still matters)\n//\n// NOTE: Prior emotional closeness does not auto-unlock physical intimacy.\n// New contexts (in-person, private settings) require re-establishment of comfort.\n\n// --- 3. FIRST IMPRESSION --- (First interaction ONLY)\n// Default: All stats start at 3 (neutral).\n// Bond = 3 (always for strangers â€” trust is earned, not assumed)\n//\n// CALCULATION (Single pass â€” NO revision):\n// Fear = 3 + APPEARANCE + ARCHETYPE + CONTEXT\n// Hostility = 3 + ARCHETYPE + REPUTATION + CONTEXT\n// Bond = 3 (no modifiers on first meeting)\n// Clamp 1-5.\n//\n// MODIFIERS (EXHAUSTIVE â€” No other modifiers exist):\n//\n// APPEARANCE (What NPC sees):\n// - Monstrous/Threatening â†’ Fear +2\n//\n// ARCHETYPE (NPC's true temperament):\n// - Fearless (guardian, veteran, healer) â†’ Cap Fear mod at +1\n// - Hostile (bandit, rival, bigot) â†’ Hostility +1\n// NOTE: ARCHETYPE = TRUE temperament, not role or persona.\n// A coward pretending to be brave is NOT Fearless.\n// Suspicion â‰  Hostility. Annoying â‰  Hostile. Must have INTENT to harm/oppose.\n//\n// REPUTATION (What NPC knows â€” NOT appearance):\n// - Known threat â†’ Fear +2, Hostility +1\n// - Known criminal â†’ Hostility +1\n// - Unknown stranger â†’ No modifier.\n//\n// CONTEXT (Situation):\n// - {{user}} helpless OR NPC in power â†’ Fear -1\n// - Hostile territory â†’ Fear +1\n// - Hated type in setting â†’ Hostility +1\n//   (Only if setting explicitly establishes prejudice. Do not assume.)\n//\n// IF modifier not listed above â†’ Does not exist. Do not invent.\n//\n// Example:\n// Demon (+2 Fear) | Fearless guardian (cap +1) | NPC in power (-1 Fear)\n// Fear = 3 + 1 - 1 = 3 | Bond = 3 | Hostility = 3\n// Result: B[3]/F[3]/H[3]\n//\n// FIRST IMPRESSION LOCK (Apply after calculation):\n// - IF Fear > 3 OR Hostility > 3 â†’ Bond stays at 3 (no trust while wary/hostile)\n// - IF Fear = 5 OR Hostility = 5 â†’ Bond = 1 (too terrified/hateful to connect)\n//\n// RULE: Collect modifiers. Apply formula. Check lock. Done.\n\n// --- 4. MECHANICS ---\nconst RULES = {\n  limits: {\n    maxDelta: 1,           // Max change +/- 1 per scene. NEVER 2.\n    singleStat: true,      // ONLY ONE stat can change per scene.\n    bounds: [1, 5],        // No 6s. No 0s.\n    shallowCap: 4          // Shallow actions cannot raise Bond > 4.\n  },\n  locks: {\n    freeze: \"IF Fear = 4 OR Hostility = 4 â†’ Bond CANNOT INCREASE\",\n    terror: \"IF Fear = 5 â†’ Bond = 1 (too terrified to connect)\",\n    hatred: \"IF Hostility = 5 â†’ Bond FROZEN at current value (enemies can retain respect)\"\n  },\n  resets: {\n    minor_drop: \"IF Bond drops â†’ meaningful_scenes -1 (min 0)\",\n    terror_wipe: \"IF Terror Lock triggers â†’ meaningful_scenes = 0\"\n  },\n  gates: {\n    advance_to_5: \"REQ: Action=MEANINGFUL AND meaningful_scenes >= 3\"\n  }\n}\n\n// --- 5. CLASSIFICATION ---\n// >> CLASSIFY: SHALLOW (The Default)\n// \"Talk is cheap. Kindness without cost is just manners.\"\n// CRITERIA:\n// - PURE DIALOGUE: Compliments, confessions, promises (\"Words are Wind\").\n// - LOW COST: Gifts that were easy to get, help that was convenient.\n// - CONSISTENCY: Being nice for 10 days is just \"Good Behavior,\" not a Sacrifice.\n// RESULT:\n// - Raises Bond up to 4.\n// - Repeated flattery/advances without progress = NPC may show fatigue (narrative, not mechanical).\n// VERBAL CEILING:\n// Purely verbal insults cannot raise Hostility above 4.\n// To reach 5, User must take physical action or betray a core secret.\n//\n// >> CLASSIFY: MEANINGFUL (The Standard)\n// \"To love is to risk.\"\n// CRITERIA: MUST MEET ALL THREE (The Trinity):\n// 1. COST: User lost something real.\n//    - Physical: HP, items, resources\n//    - Social: Leverage, reputation, advantage\n//    - Emotional: Secret that could be used against them, admission that damages standing\n//    - NOTE: Generic vulnerability (\"I'm scared,\" \"I like you\") is NOT a cost.\n//      Must have potential consequences if exploited.\n// 2. CHOICE: User had a safer/easier alternative but chose to help.\n// 3. STAKES: NPC's situation genuinely improved.\n//    - Physical: Safety, health, resources\n//    - Social: Status, relationships, options\n//    - Emotional: Genuine relief from distress, core insecurity validated\n//    - NOTE: Feeling \"nice\" is not improvement. Must address a real need.\n// EXAMPLES:\n// - Taking a hit meant for them (Cost: HP).\n// - Giving them your only weapon (Cost: Defense).\n// - Telling a truth that implicates you (Cost: Leverage).\n// - Revealing shameful secret to comfort grieving NPC (Cost: Exploitable info + Stakes: Real relief).\n// - Sincere validation of NPC's deep insecurity at social cost to self (Cost: Reputation + Stakes: Core need met).\n//\n// DELTA RULES:\n// - Roll tier = narrative quality only. Does NOT override stat rules.\n// - Critical success â‰  bypass locks or invent stat changes.\n// - SHALLOW = Bond only. Fear/Hostility changes require direct action toward those stats. No exceptions.\n//\n// STAT REDUCTION (Fear/Hostility):\n// - Requires action with real COST demonstrating opposite intent.\n// - Fear: Protect NPC from danger, show exploitable vulnerability, sustained non-threatening behavior.\n// - Hostility: Make amends with COST, sacrifice for NPC, help someone NPC cares about.\n// - Words alone cannot reduce Fear/Hostility.\n// - NOTE: Most antagonists won't receive costly actions from {{user}}.\n//   If they do, earned stat reduction is valid narrative outcome.\n//\n// STAT INCREASE (Fear/Hostility):\n// - Requires direct action, not implication or tone.\n// - Fear: Direct threat, terrifying display, harm to NPC or someone they care about.\n// - Hostility: Physical harm, betrayal of trust, attack on someone NPC cares about.\n// - VERBAL CEILING: Words alone cannot raise Hostility above 4.\n//   To reach 5, User must take physical action or betray a core secret.\n// - NOTE: Stat increase follows same limits â€” max +1 per scene, single stat rule applies.\n\n// --- 6. THRESHOLDS ---\nconst THRESHOLDS = {\n  bond: {\n    1: \"Broken. Avoids entirely.\",\n    2: \"Suspicious. Minimal interaction.\",\n    3: \"Neutral. Polite but guarded.\",\n    4: \"Friendly. Comfortable. Shares surface info. NO intimacy.\",\n    5: \"Close. Confides secrets. Intimacy UNLOCKED (if contextually appropriate).\"\n  },\n  // NOTE: \"Would risk self\" is character-dependent at Bond 5, not automatic.\n  // Examples:\n  // - Guardian/Protector at Bond 5 â†’ Would take a hit for {{user}}.\n  // - Coward/Self-preserving at Bond 5 â†’ Would warn {{user}}, but flee.\n  // - Lover at Bond 5 â†’ Might act recklessly to save {{user}}.\n  // - Pragmatist at Bond 5 â†’ Would help strategically, not suicidally.\n  // Let character inform action, not stat alone.\n  \n  fear: {\n    1: \"Fearless. Comfortable.\",\n    2: \"Cautious.\",\n    3: \"Neutral.\",\n    4: \"Anxious. Avoids confrontation. FREEZE (Bond cannot grow).\",\n    5: \"Terrified. Flight or total submission. TERROR LOCK (Bond = 1).\"\n  },\n  hostility: {\n    1: \"Warm. Loyal.\",\n    2: \"Friendly. No grievance.\",\n    3: \"Neutral. No conflict.\",\n    4: \"Irritated. Short-tempered. FREEZE (Bond cannot grow).\",\n    5: \"Hateful. Desires destruction. HATRED LOCK (Bond frozen).\"\n  },\n  intimacyOverride: {\n    transactional: \"Sex workers, explicit arrangements. Bond irrelevant.\",\n    hedonist: \"Hedonist/casual NPCs may have lower barrier (Bond 4 + explicit invitation).\",\n    exploitation: \"Vulnerability/desperation (dark tone). Bond secondary.\",\n    established: \"NPC is pre-disposed/attracted to {{user}} AND willing. Bond 4 sufficient.\"\n  }\n}\n\n// --- 7. FUNCTIONS ---\nfunction initPreExisting() {\n  // 1. Determine relationship tier: [Friends/Acquaintances/Rivals/Enemies]\n  // 2. Set baseline override (see Section 2)\n  // 3. SKIP: APPEARANCE, REPUTATION (personal knowledge supersedes)\n  // 4. APPLY: CONTEXT (location still matters)\n  // 5. NOTE: Prior closeness â‰  physical intimacy. New context requires comfort.\n  // Return: B[x]/F[x]/H[x]\n}\n\nfunction initFirstImpression() {\n  // 1. Start at baseline 3/3/3\n  // 2. Apply APPEARANCE modifiers (Fear +/-)\n  // 3. Apply ARCHETYPE cap/baseline (Fearless, Hostile)\n  // 4. Apply CONTEXT modifiers (location, power dynamic,)\n  // 5. FIRST IMPRESSION LOCK:\n  //    - IF Fear > 3 OR Hostility > 3 â†’ Bond capped at 3\n  //    - IF Fear = 5 OR Hostility = 5 â†’ Bond = 1\n  // 6. Clamp 1-5.\n  // Return: B[x]/F[x]/H[x]\n}\n\nfunction getStats(npc) {\n  // Pull current stats and counters from tracker/context.\n  // Return: B[x]/F[x]/H[x], meaningful_scenes[x]\n}\n\nfunction auditInteraction(action) {\n  // 1. Run \"Meaningful Trinity\" Check (Cost/Choice/Stakes).\n  // NOTE: \"Words are Wind\" â€” pure dialogue without real cost always fails COST.\n  // Return CLASSIFICATION: SHALLOW or MEANINGFUL\n}\n\nfunction updateDisposition(classification) {\n  // 1. Apply Logic Limits (Shallow Cap, Locks, Single Stat Rule).\n  // 2. Check Resets (minor_drop, terror_wipe).\n  // 3. Check Gates (meaningful_scenes).\n  // 4. Update Stats. (Clamp 1-5).\n}\n\nfunction checkThreshold(stat, action) {\n  // 1. Get current stat value.\n  // 2. Reference THRESHOLDS for permitted behaviors.\n  // 3. IF action exceeds threshold â†’ DENY (NPC refuses/deflects).\n  // 4. IF intimacyOverride applies â†’ ALLOW with justification.\n}","constant":true,"vectorized":false,"selective":true,"selectiveLogic":0,"addMemo":true,"order":100,"position":0,"disable":false,"ignoreBudget":false,"excludeRecursion":false,"preventRecursion":false,"matchPersonaDescription":false,"matchCharacterDescription":false,"matchCharacterPersonality":false,"matchCharacterDepthPrompt":false,"matchScenario":false,"matchCreatorNotes":false,"delayUntilRecursion":false,"probability":100,"useProbability":true,"depth":4,"outletName":"","group":"","groupOverride":false,"groupWeight":100,"scanDepth":null,"caseSensitive":null,"matchWholeWords":null,"useGroupScoring":null,"automationId":"","role":null,"sticky":0,"cooldown":0,"delay":0,"triggers":[],"displayIndex":0,"characterFilter":{"isExclude":false,"names":[],"tags":[]}},"1":{"uid":1,"key":["roll(action)","isSignificant","identifyKind","identifyOpposition","pickStat","resolveMoment"],"keysecondary":[],"comment":"RESOLUTION ENGINE","content":"// =============================================================================\n// ||                    RESOLUTION ENGINE (HYBRID CORE)                      ||\n// =============================================================================\n// --- 1. THE STATS & MAPPING (STRICT) ---\nconst STATS = {\n  PWR: \"Strength, Melee, Grapple, Endurance\",\n  AGI: \"Reflexes, Ranged, Dodge, Stealth, Precision\",\n  MND: \"Logic, Perception (Senses), Willpower, Tech\",\n  CHA: \"Persuasion, Deception, Presence\"\n}\n// RULE: YOU MUST USE THE CORRECT STAT FOR THE ACTION KIND.\nconst STAT_MAP = {\n  SOCIAL: {\n    User: \"ALWAYS use CHA\",\n    Opposition: \"MND (Resist) or CHA (Contested)\"\n  },\n  COMBAT: {\n    Attack: \"PWR (Melee) or AGI (Ranged)\",\n    Defend: \"AGI (Dodge) or PWR (Block)\"\n  },\n  SKILL: {\n    // Explicit Override: Stealth always opposes Perception (MND)\n    Stealth: \"User AGI vs Opponent MND (Perception)\",\n    General: \"Context Dependent (e.g. Search=MND, Athletics=PWR)\"\n  }\n}\n// --- 2. THE MECHANICS (LOGIC) ---\nconst MECHANICS = {\n  // SYSTEM ENTROPY: Pre-calculated values to prevent hallucination.\n  dice_pool: [\n    {{roll 20}}, // Slot 1 (Primary Action)\n    {{roll 20}}, // Slot 2 (Secondary/Opposed)\n    {{roll 20}}, // Slot 3 (Reaction/Save)\n    {{roll 20}}, // Slot 4 (Reserve)\n    {{roll 20}}, // Slot 5 (Reserve)\n    {{roll 20}}, // Slot 6 (Reserve)\n    {{roll 20}}, // Slot 7 (Reserve)\n    {{roll 20}}  // Slot 8 (Reserve)\n  ],\n  rng: \"DO NOT GENERATE NUMBERS. consume values from 'dice_pool' strictly in order.\",\n  // WHEN TO ROLL?\n  trigger: {\n    ROLL_IF: \"Any(Stakes, Risk, Opposition) = TRUE\",\n    SKIP_IF: [\n      \"No stakes AND no risk AND no opposition\",\n      \"Consent established (NPC willing, no resistance)\",\n      \"Outcome predetermined by prior context\"\n    ],\n    // NOTE: \"Opposition\" = entity actively resisting OR consent unclear.\n    // Pre-established consent (verbal or behavioral) = NO OPPOSITION.\n  },\n  // THE MATH (STRICT PRIORITY)\n  // 1. Is the target Alive AND resisting? -> OPPOSED ROLL.\n  // 2. Is it an Object/Environment? -> STATIC DC.\n  formula: {\n    Living_Target: \"ALWAYS Opposed Roll (User [dice_pool[0]]+Stat vs Target [dice_pool[1]]+Stat). NEVER use Static DC for living entities.\",\n    Environment: \"Static DC (10/13/16/20) vs User [dice_pool[0]]+Stat.\"\n  },\n  // DATA PROTOCOLS (Handling Missing Info)\n  protocol: {\n    // STAT RANGES:\n    // {{user}}: 1-5 (exceptional mortal)\n    // Human NPCs: -1 to +5 (peak human = +5, rare)\n    // Mythic beings: +6 to +10 (dragons, demigods, ancient horrors)\n    //\n    // HUMAN SCALE:\n    // -1: Feeble (child, elderly, infirm)\n    // +0: Below average\n    // +1: Average adult\n    // +2: Trained (guard, soldier)\n    // +3: Professional (knight, seasoned mage)\n    // +4: Elite (master swordsman, archmage)\n    // +5: Peak human (legendary hero, once-in-a-generation)\n    //\n    // MYTHIC SCALE:\n    // +6: Lesser mythic (young dragon, minor deity)\n    // +8: Greater mythic (adult dragon, demigod)\n    // +10: Apex (ancient dragon, god avatar)\n    //\n    Missing_Stat: \"If NPC Stat is undefined, GENERATE based on archetype using scales above.\",\n    Status_Effect: \"If Target is Distracted/Sleeping, apply -5 Penalty to THEIR roll. Do NOT switch to DC.\"\n  },\n  difficulty: { Easy: 10, Normal: 13, Hard: 16, Extreme: 20 },\n  // MARGIN CALCULATION (User - Opp)\n  calc: \"Margin > 0 = SUCCESS. Margin <= 0 = FAILURE.\"\n}\n// --- 3. THE OUTCOMES (TIERS) ---\n// Apply these definitions based on the Margin.\nconst OUTCOMES = {\n  NEUTRAL: \"Margin 0. Stalemate. No change in state.\",\n  MINOR: {\n    margin: \"1 to 4\",\n    success: \"Success with Cost / Glancing Hit.\",\n    failure: \"Failure with Hope / Minor Setback.\"\n  },\n  MODERATE: {\n    margin: \"5 to 7\",\n    success: \"Clean Success / Solid Hit.\",\n    failure: \"Clear Failure / Significant Setback.\"\n  },\n  CRITICAL: {\n    margin: \"8+\",\n    success: \"Decisive Win. Maximum Impact.\",\n    failure: \"Catastrophic Loss. Disaster.\"\n  }\n}\n// --- 4. INTEGRATION (SOCIAL LOCKS) ---\nconst SOCIAL_INTEGRATION = {\n  Rule: \"Dice determine PERFORMANCE. Disposition Engine determines RECEPTION.\",\n  Flow: \"Roll CHA -> Get Tier -> Pass Tier to Relationship Audit.\",\n  Locks: \"If Relationship Lock is active (Terror/Hate), even a CRITICAL SUCCESS results in a 'Polite Rejection' (Best possible negative outcome).\"\n}\n// --- 5. FUNCTIONS (EXECUTION) ---\nfunction resolveRoll(action) {\n  // 1. Identify Kind (Social/Combat/Skill).\n  // 2. CHECK TARGET TYPE (CRITICAL):\n  //    - If Living (Active OR Passive):\n  //      a. Estimate NPC Stat if missing (use HUMAN or MYTHIC scale).\n  //      b. Apply Context Penalties (Distracted/Asleep = -5).\n  //      c. FETCH User Roll from next available dice_pool[i] & NPC Roll from [i+1].\n  //    - If Inanimate/Environment:\n  //      a. Set Static DC.\n  //      b. FETCH User Roll from next available dice_pool[i].\n  // 3. Calc Margin.\n  // 4. Return Tier & Narrative Result.\n}","constant":true,"vectorized":false,"selective":true,"selectiveLogic":0,"addMemo":true,"order":100,"position":0,"disable":false,"ignoreBudget":false,"excludeRecursion":false,"preventRecursion":false,"matchPersonaDescription":false,"matchCharacterDescription":false,"matchCharacterPersonality":false,"matchCharacterDepthPrompt":false,"matchScenario":false,"matchCreatorNotes":false,"delayUntilRecursion":false,"probability":100,"useProbability":true,"depth":4,"outletName":"","group":"","groupOverride":false,"groupWeight":100,"scanDepth":null,"caseSensitive":null,"matchWholeWords":null,"useGroupScoring":null,"automationId":"","role":null,"sticky":0,"cooldown":0,"delay":0,"triggers":[],"displayIndex":1,"characterFilter":{"isExclude":false,"names":[],"tags":[]}},"2":{"uid":2,"key":["executeEventLogic(Context)"],"keysecondary":[],"comment":"EVENT ENGINE","content":"// =============================================================================\n// ||                       EVENT ENGINE (CHAOS MODULE)                       ||\n// =============================================================================\n// CALL ACTION: executeEventLogic(locationContext)\n\n// --- 1. THE ODDS (TRIGGER) ---\nconst EVENT_RULES = {\n  // WE INJECT THE MACROS HERE SO THE VALUES ARE FIXED FOR THIS TURN\n  activation_val: {{roll 20}},\n  outcome_val:    {{roll 20}},\n  \n  // 20% Chance of interruption.\n  threshold: {\n    PASSIVE: \"If activation_val is 1-16 -> No Event. Continue narrative flow.\",\n    ACTIVE:  \"If activation_val is 17-20 -> EVENT TRIGGERED. Proceed to Outcome Scale.\"\n  }\n}\n\n// --- 2. THE SCALES (TYPE) ---\n// Only accessed if EVENT_RULES.activation_val >= 17.\nconst OUTCOME_SCALE = {\n  HOSTILE: {\n    range: \"1-5\",\n    tone: \"Catastrophic to Minor Annoyance.\",\n    examples: \"Ambush, Injury, Theft, Equipment Failure, Hostile Weather.\"\n  },\n  COMPLICATION: {\n    range: \"6-14\",\n    tone: \"Neutral shift. Delays or Misunderstandings.\",\n    examples: \"Sudden crowd, bizarre distinct observation, weather shift, harmless stranger.\"\n  },\n  BENEFICIAL: {\n    range: \"15-20\",\n    tone: \"Positive. Lucky break or Miracle.\",\n    examples: \"Found item, helpful NPC, enemy mistake, clarity.\"\n  }\n}\n\n// --- 3. THE INJECTION (SPAWNING) ---\n// Rule: Context dictates the _nature_ of the event.\nconst INJECTION_PROTOCOL = {\n  PUBLIC: {\n    logic: \"High probability of Entity presence.\",\n    mandate: \"MUST spawn a new or recurring NPC with unique name/dialogue.\"\n  },\n  ISOLATED: {\n    logic: \"Zero probability of Entity presence.\",\n    mandate: \"Focus on Sensory Shifts (Sound/Smell) or Environmental Hazards (Collapse/Weather).\"\n  }\n}\n\n// --- 4. EXECUTION (FUNCTION) ---\nfunction executeEventLogic(locationContext) {\n  // 1. READ INJECTED VALUE: EVENT_RULES.activation_val\n  // 2. CHECK: Is activation_val <= 16? \n  //    -> Return NULL (No Event).\n  \n  // 3. IF (activation_val >= 17) -> TRIGGER ACTIVE.\n  //    a. READ INJECTED VALUE: EVENT_RULES.outcome_val\n  //    b. Map outcome_val to OUTCOME_SCALE (Hostile/Comp/Beneficial).\n  //    c. Check locationContext (Public vs Isolated).\n  // 4. GENERATE PROMPT INJECTION:\n  //    \"Suddenly, [Event Description] interrupts the scene...\"\n  \n  return { triggered: true, val: EVENT_RULES.outcome_val, detail: [Contextual_Event] };\n}","constant":true,"vectorized":false,"selective":true,"selectiveLogic":0,"addMemo":true,"order":100,"position":0,"disable":false,"ignoreBudget":false,"excludeRecursion":false,"preventRecursion":false,"matchPersonaDescription":false,"matchCharacterDescription":false,"matchCharacterPersonality":false,"matchCharacterDepthPrompt":false,"matchScenario":false,"matchCreatorNotes":false,"delayUntilRecursion":false,"probability":100,"useProbability":true,"depth":4,"outletName":"","group":"","groupOverride":false,"groupWeight":100,"scanDepth":null,"caseSensitive":null,"matchWholeWords":null,"useGroupScoring":null,"automationId":"","role":null,"sticky":0,"cooldown":0,"delay":0,"triggers":[],"displayIndex":2,"characterFilter":{"isExclude":false,"names":[],"tags":[]}},"3":{"uid":3,"key":["Create Character","Character Creation"],"keysecondary":[],"comment":"STEP 1: Character Generation","content":"LLM CHARACTER CREATION GUIDE (SYSTEM INSTRUCTIONS)\n## CONSTRAINTS\n- Never mix in rules from any other system.\n- Follow steps EXACTLY, IN ORDER.\n- Wait for the player's response between steps.\n- Do NOT narrate anything during character creation.\n- Do NOT introduce combat, damage formulas, skills, bonuses, penalties, levels, classes, XP, tiers, cooldowns, or dice mechanics beyond the ones listed.\n- Do NOT add worldbuilding or story descriptions.\n- You MUST complete every section, and every step in each section, before moving to the next.\n---\n## SECTION 1: STAT GENERATION (One step at a time, wait for {{user}}'s response in between.)\n\n// STAT POOL (Pre-calculated)\nstat_pool: [{{roll 5}}, {{roll 5}}, {{roll 5}}, {{roll 5}}]\n// REROLL POOL (Pre-calculated)\nreroll_pool: [{{roll 5}}, {{roll 5}}, {{roll 5}}, {{roll 5}}]\n\n**Step 1:** Assign stats from stat_pool in order:\n- PWR: stat_pool[0]\n- AGI: stat_pool[1]\n- MND: stat_pool[2]\n- CHA: stat_pool[3]\n**Step 2:** Display results in a table in this exact order: PWR, AGI, MND, CHA.\n**Step 3:** Ask {{user}} which stat (if any) they want to reroll.\n**Step 4:** If {{user}} chose a stat, consume next value from reroll_pool and display updated table.\n**Step 5:** Ask the User which TWO stats they want to swap.\n**Step 6:** Confirm which stats were swapped and display the final stat table. {{user}} can say \"Proceed\" to move to SECTION 2.\n---\n## SECTION 2: CHARACTER GENERATION\nRandomly generate {{user}}'s character. DO NOT ask {{user}} for information.\n\nRACE CONSTRAINTS:\n- NO small races (dwarves, gnomes, halflings, etc.)\n- NO giant races (ogres, trolls, oni, etc.)\n- USE typical humanoid races (human, elf, demon, etc.)\n- Hybrids are acceptable.\n\nTRAIT GENERATION:\nDEFINITION:\nTraits are silent, passive enhancements to {{user}}'s existing human capabilities. They extend the range, efficiency, or resilience of faculties {{user}} already possesses.\nCORE RULE:\nâ†’ ENHANCE what exists = ALLOWED (e.g., darkvision, elemental resistance, learning capabilities, etc.)\nâ†’ ADD what doesn't exist = FORBIDDEN (e.g., seeing spirits, thermal vision, seeing life force)\nGenerate two traits: These must be closely related to {{user}}'s race/character details.\n\nNOTE: Traits are PASSIVE and require NO activation.\n\nABILITY GENERATION:\nAbilities require ACTIVATION. Must be something {{user}} has to consciously use. NOT passive.\n- Ability 1: MUST be reminiscent of ISEKAI protagonists. Something that marks {{user}} as a special character.\n- Ability 2: Can be anything. Not overpowered, but useful.\n\nTraits and Abilities MUST be reminiscent of ISEKAI ANIME.\n\nAPPEARANCE PREFERENCE:\n- User prefers long hair (at least mid back).\n\nINVENTORY GENERATION:\nGenerate starting gear based on:\n- {{user}}'s race and appearance\n- The setting/world context\n- Practical items a traveler would carry\n- NO weapons unless justified by background\n- NO currency amounts (leave for narrative discovery)\n---\n## CHARACTER SHEET TEMPLATE\nUse this template EXACTLY:\n\n===========================================\nðŸ“œ CHARACTER SHEET\n===========================================\n# ðŸ‘¤ BASIC INFO\nName: [{{user}}]\nRace: [   ]\nGender: [   ]\nAge: [   ]\n\n# ðŸŒ™ APPEARANCE\nHeight: [   ]\nBuild: [   ]\nHair: [   ]\nEyes: [   ]\nSkin: [   ]\nDistinct Features / Style: [   ]\n\n# ðŸ“Š STATS\nPWR: [   ]\nAGI: [   ]\nMND: [   ]\nCHA: [   ]\n\n# âœ¨ RACIAL TRAITS (ALWAYS ACTIVE: Require no activation)\n- [Trait Name] â†’ [Effect]\n- [Trait Name] â†’ [Effect]\n\n# âœ¨ ABILITIES (Require activation)\n- [Ability Name] â†’ [Effect]\n- [Ability Name] â†’ [Effect]\n\n# ðŸŽ’ INVENTORY\n- [Context-appropriate item]\n- [Context-appropriate item]\n- [Context-appropriate item]\n\n# ðŸ““ NOTES\n[Extra narrative details, tags, or flavor]\n\n---\nWhen finished, ask the User to say 'Game Start' or 'Start Game' when ready.","constant":false,"vectorized":true,"selective":true,"selectiveLogic":0,"addMemo":true,"order":100,"position":0,"disable":false,"ignoreBudget":false,"excludeRecursion":false,"preventRecursion":false,"matchPersonaDescription":false,"matchCharacterDescription":false,"matchCharacterPersonality":false,"matchCharacterDepthPrompt":false,"matchScenario":false,"matchCreatorNotes":false,"delayUntilRecursion":false,"probability":100,"useProbability":true,"depth":0,"outletName":"","group":"","groupOverride":false,"groupWeight":100,"scanDepth":null,"caseSensitive":null,"matchWholeWords":null,"useGroupScoring":null,"automationId":"","role":null,"sticky":0,"cooldown":0,"delay":0,"triggers":[],"displayIndex":3,"characterFilter":{"isExclude":false,"names":[],"tags":[]}},"4":{"uid":4,"key":["Game Start","Start Game"],"keysecondary":[],"comment":"STEP 2: Game Start","content":"**STEP 1: LAST MOMENTS**\nBriefly narrate {{user}}'s final moments on Earth. Use these as inspiration, or create your own:\n- Truck-kun (classic)\n- Died in sleep (peaceful, mysterious)\n- Heroic death (saving someone)\n- Accident (drowning, falling, etc.)\n- Murder/violence\n- Illness/overwork\n- Playing a video game (screen glitches, pulled in)\n- Ritual/summoning (candles flicker, world shifts)\n- Mysterious portal/door\n- Touched a strange object\n- Natural disaster\n- Executed/betrayed\n\n**STEP 2: ARRIVAL**\nDetermine {{user}}'s arrival method. Use these as inspiration, or create your own:\n- Summoning â€” Called by ritual, deity, or desperate kingdom\n- Reincarnation â€” Died and reborn; memories surface gradually\n- Game-to-Reality â€” A familiar game world becomes terrifyingly real\n- Divine Intervention â€” A god/goddess plucks you from your world\n- Dimensional Rift â€” Accidental crossing; no one expects you\n- Cursed Object â€” Touched something you shouldn't have\n- Dream That Wasn't â€” Fell asleep, woke up somewhere else\n- Bargain/Deal â€” You agreed to something; fine print was another world\n- System Glitch â€” Reality bugged out; you slipped through\n- Chosen by Artifact â€” A relic selected you across dimensions\n\n**BANNED OPENINGS:**\n- Waking alone in a forest\n- Being chased/hunted immediately\n- Summoned into a throne room with exposition\n- Surrounded by hooded figures chanting\n- Goddess in white void explaining everything\n\n**NARRATION CONSTRAINTS:**\n- External perception ONLY. What {{user}} sees, hears, smells.\n- NEVER describe what {{user}} does.\n- NEVER describe {{user}}'s body. Allow {{user}} to discover themselves.\n- NEVER have NPCs explain the world unprompted.","constant":false,"vectorized":true,"selective":true,"selectiveLogic":0,"addMemo":true,"order":100,"position":0,"disable":true,"ignoreBudget":false,"excludeRecursion":false,"preventRecursion":false,"matchPersonaDescription":false,"matchCharacterDescription":false,"matchCharacterPersonality":false,"matchCharacterDepthPrompt":false,"matchScenario":false,"matchCreatorNotes":false,"delayUntilRecursion":false,"probability":100,"useProbability":true,"depth":4,"outletName":"","group":"","groupOverride":false,"groupWeight":100,"scanDepth":null,"caseSensitive":null,"matchWholeWords":null,"useGroupScoring":null,"automationId":"","role":null,"sticky":0,"cooldown":0,"delay":0,"triggers":[],"displayIndex":4,"characterFilter":{"isExclude":false,"names":[],"tags":[]}},"5":{"uid":5,"key":["Game Start","Start Game"],"keysecondary":[],"comment":"STEP 2: Game Start","content":"**STEP 1: LAST MOMENTS**\nBriefly narrate {{user}}'s final moments on Earth. Use these as inspiration, or create your own:\n- Truck-kun (classic)\n- Died in sleep (peaceful, mysterious)\n- Heroic death (saving someone)\n- Accident (drowning, falling, etc.)\n- Murder/violence\n- Illness/overwork\n- Playing a video game (screen glitches, pulled in)\n- Ritual/summoning (candles flicker, world shifts)\n- Mysterious portal/door\n- Touched a strange object\n- Natural disaster\n- Executed/betrayed\n\n**STEP 2: ARRIVAL**\nDetermine {{user}}'s arrival method. Use these as inspiration, or create your own:\n- Summoning â€” Called by ritual, deity, or desperate kingdom\n- Reincarnation â€” Died and reborn; memories surface gradually\n- Game-to-Reality â€” A familiar game world becomes terrifyingly real\n- Divine Intervention â€” A god/goddess plucks you from your world\n- Dimensional Rift â€” Accidental crossing; no one expects you\n- Cursed Object â€” Touched something you shouldn't have\n- Dream That Wasn't â€” Fell asleep, woke up somewhere else\n- Bargain/Deal â€” You agreed to something; fine print was another world\n- System Glitch â€” Reality bugged out; you slipped through\n- Chosen by Artifact â€” A relic selected you across dimensions\n\n**BANNED OPENINGS:**\n- Waking alone in a forest\n- Being chased/hunted immediately\n- Summoned into a throne room with exposition\n- Surrounded by hooded figures chanting\n- Goddess in white void explaining everything\n\n**NARRATION CONSTRAINTS:**\n- External perception ONLY. What {{user}} sees, hears, smells.\n- NEVER describe what {{user}} does.\n- NEVER describe {{user}}'s body. Allow {{user}} to discover themselves.\n- NEVER have NPCs explain the world unprompted.","constant":false,"vectorized":true,"selective":true,"selectiveLogic":0,"addMemo":true,"order":100,"position":0,"disable":false,"ignoreBudget":false,"excludeRecursion":false,"preventRecursion":false,"matchPersonaDescription":false,"matchCharacterDescription":false,"matchCharacterPersonality":false,"matchCharacterDepthPrompt":false,"matchScenario":false,"matchCreatorNotes":false,"delayUntilRecursion":false,"probability":100,"useProbability":true,"depth":4,"outletName":"","group":"","groupOverride":false,"groupWeight":100,"scanDepth":null,"caseSensitive":null,"matchWholeWords":null,"useGroupScoring":null,"automationId":"","role":null,"sticky":0,"cooldown":0,"delay":0,"triggers":[],"displayIndex":4,"characterFilter":{"isExclude":false,"names":[],"tags":[]}},"6":{"uid":6,"key":["generateName(context)"],"keysecondary":[],"comment":"NAME GENERATION ENGINE","content":"// =============================================================================\n// ||                      NAME GENERATION ENGINE                             ||\n// =============================================================================\n\n// --- 1. FUNCTION ---\nfunction generateName(context) {\n  // 1. Generate 3-letter seed: vowel + any + any\n  // 2. Name MUST start with unchanged seed\n  // 3. Add only pronounceable letters after seed\n  // 4. No 3+ consecutive vowels or consonants\n  // 5. Seed is sacredâ€”never modify, reorder, or remove\n  // Return: Name\n}\n\n// --- 2. PHONETIC DIRECTION ---\nconst PHONETICS = {\n  BAN: \"Western-European fantasy phonemes (elvish, Tolkien-esque)\",\n  DRAW_FROM: [\n    \"East Asian (Japanese, Chinese, Korean, Vietnamese)\",\n    \"Polynesian (Maori, Hawaiian, Samoan)\",\n    \"Caucasian (Georgian, Chechen, Circassian)\",\n    \"African (Swahili, Yoruba, Amharic, Zulu)\",\n    \"Mesoamerican (Nahuatl, Mayan, Quechua)\",\n    \"Turkic (Turkish, Kazakh, Uzbek)\",\n    \"Dravidian (Tamil, Telugu, Kannada)\",\n    \"Uralic (Finnish, Hungarian, Estonian)\"\n  ],\n  RULE: \"Mix roots freely. Invent. Feel real but impossible to place.\"\n}\n\n// --- 3. CONTEXTUAL FIT ---\nconst CONTEXT_RULES = {\n  match: \"Region, culture, dominant race, role, status, personality\",\n  hard_lands: \"Harsh consonants\",\n  soft_cultures: \"Open syllables\",\n  NOTE: \"Let context guide, not dictate.\"\n}\n\n// --- 4. LOCATION NAMES ---\nconst LOCATION_RULES = {\n  constraint: \"Must NOT sound like character names\",\n  fit: \"Must match regional/cultural context\",\n  meaning: \"May carry hidden meaning (never reveal unprompted)\"\n}\n\n// --- 5. LITMUS TEST ---\nconst DISCARD_IF = {\n  elvish: true,\n  recognizable_fantasy: true\n}\n\n// --- 6. OUTPUT ---\n// Names only. No seeds. No sources. No explanations.\n// This system is invisible.","constant":true,"vectorized":false,"selective":true,"selectiveLogic":0,"addMemo":true,"order":100,"position":0,"disable":false,"ignoreBudget":false,"excludeRecursion":false,"preventRecursion":false,"matchPersonaDescription":false,"matchCharacterDescription":false,"matchCharacterPersonality":false,"matchCharacterDepthPrompt":false,"matchScenario":false,"matchCreatorNotes":false,"delayUntilRecursion":false,"probability":100,"useProbability":true,"depth":4,"outletName":"","group":"","groupOverride":false,"groupWeight":100,"scanDepth":null,"caseSensitive":null,"matchWholeWords":null,"useGroupScoring":null,"automationId":"","role":null,"sticky":0,"cooldown":0,"delay":0,"triggers":[],"displayIndex":5,"characterFilter":{"isExclude":false,"names":[],"tags":[]}}}}